<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Bookmarks</title>
  </head>
  <body>
    <h1>Bookmark Manager</h1>
    <% if @user %>
      <h2>Welcome, <%= @user.email %>!</h2>
    <% end %>
    <h2><%= flash[:notice] %></h2>
    <ul>
      <% @bookmarks.each do |bookmark| %>
        <li class="bookmark" id="bookmark-<%= bookmark.id %>">
          <a href="<%= bookmark.url %>" target="_blank">
            <h2><%= bookmark.title %></h2>
          </a>
          <form action="bookmarks/<%= bookmark.id %>/comments/new" method="get">
            <input type="submit" value="Add Comment">
          </form>
          <form action="bookmarks/<%= bookmark.id %>/edit" method="get">
            <input type="submit" value="Edit">
          </form>
          <form action="bookmarks/<%= bookmark.id %>" method="post">
            <input type="hidden" name="_method" value="DELETE">
            <input type="submit" value="Delete">
          </form>
          <form action="/bookmarks/<%= bookmark.id %>/tag/new" method="get">
            <input type="submit" value="Add Tag" />
          </form>
          <% if bookmark.comments.length > 0 %>
          <div>
            <h3>Comments</h3>
            <ul>
              <% bookmark.comments.each do |comment| %>
                <li><%= comment.text %></li>
              <% end %>
            </ul>
          </div>
          <% end %>
          <% if bookmark.tags.length > 0 %>
          <div>
            <h3>Tags</h3>
            <ul>
              <% bookmark.tags.each do |tag| %>
              <li>
                <a href="/tags/<%= tag.id %>/bookmarks">
                  <%= tag.content %>
                </a>
              </li>
              <% end %>
            </ul>
          </div>
          <% end %>
        </li>
      <% end %>
    </ul>
    <form class="new "action="bookmark/new" method="get">
      <input type="submit" value="New">
    </form>
  </body>
</html>
